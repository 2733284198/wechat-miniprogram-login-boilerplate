
<view wx:if="{{canIUse}}">
    <view class="weui-article">
        <view class="weui-article__section">
            <view class="weui-article__h3">显示用户信息的两种方式</view>
            <view class="weui-article__p">
                如果只是在页面上显示用户昵称性别等信息，可以通过open-data的方式直接显示，如果需要更复杂的使用逻辑，则需要通过用户授权获取用户信息。对于手机号、地理位置等敏感信息，则需要用户额外授权。
            </view>
        </view>
    </view>
    <button open-type="openSetting" type="default">通过open-data获取userInfo</button>

    <view class="weui-panel weui-panel_access">
        <view class="weui-panel__bd">
            <navigator url="" class="weui-media-box weui-media-box_appmsg" hover-class="weui-cell_active">
                <view class="weui-media-box__hd weui-media-box__hd_in-appmsg">
                    <open-data class="avatar-img" type="userAvatarUrl" lang="zh_CN"></open-data>
                </view>
                <view class="weui-media-box__bd weui-media-box__bd_in-appmsg">
                    <view class="weui-media-box__title"><open-data type="userNickName" lang="zh_CN"></open-data></view>
                    <view class="weui-media-box__desc">性别:<open-data type="userGender" lang="zh_CN"></open-data></view>

                    <view class="weui-media-box__desc">地区:<open-data class="country" type="userCountry" lang="zh_CN"></open-data>
                    <open-data class="province" type="userProvince" lang="zh_CN"></open-data>
                    <open-data class="city" type="userCity" lang="zh_CN"></open-data></view>
                </view>
            </navigator>

        </view>
    </view>

    <button open-type="openSetting" type="default">通过用户授权获取userInfo</button>
    <view wx:if="{{isValidSession && hasUserInfo}}" class="weui-panel weui-panel_access">
        <view class="weui-panel__bd">
            <navigator url="" class="weui-media-box weui-media-box_appmsg" hover-class="weui-cell_active">
                <view class="weui-media-box__hd weui-media-box__hd_in-appmsg">
                    <image class="weui-media-box__thumb avatar" src="{{userInfo.avatarUrl || \"../../images/user-unlogin.png\"}}" />
                </view>
                <view class="weui-media-box__bd weui-media-box__bd_in-appmsg">
                    <view class="weui-media-box__title">{{userInfo.nickName}}</view>
                    <view class="weui-media-box__desc">性别:{{index.transform(userInfo.gender)}}</view>

                    <view wx:if="{{isValidSession && hasPhoneNumber}}" class="weui-media-box__desc">手机:{{userInfo.phoneNumber}}</view>
                </view>
            </navigator>

        </view>
    </view>

    <view wx:if="{{!hasUserInfo || !hasPhoneNumber}}" class='content'>
        <view>申请获取以下权限</view>
        <text wx:if="{{!hasUserInfo}}">获得你的公开信息(昵称、头像、地区和性别)</text>
        <text wx:if="{{!hasPhoneNumber}}">申请获取你微信绑定的手机号</text>
    </view>

    <button wx:if="{{!hasUserInfo}}" class='bottom' type='primary' open-type="getUserInfo" lang="zh_CN" bindgetuserinfo="bindGetUserInfo">
        授权登录
    </button>
    <button wx:if="{{!hasPhoneNumber}}" class='bottom' type='primary' lang="zh_CN" open-type="getPhoneNumber"
    bindgetphonenumber="bindGetPhoneNumber">
        授权获取手机号
    </button>
    <view>
      <button open-type="openSetting" type="default">小程序权限设置</button>
    </view>
</view>

<view wx:else>请升级微信版本</view>
<wxs src="./index.wxs" module="index" />
